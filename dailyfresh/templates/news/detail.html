<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>文章详情页</title>
    <link rel="stylesheet" type="text/css" href="css/reset.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script type="text/javascript" src="js/jquery-1.12.4.min.js"></script>
    <script src="js/vue.js"></script>
    <script src="js/main.js"></script>
    <script type="text/javascript" src="js/detail.js"></script>
</head>
<body>
    <div class="header_con">
        <div class="header">
            <a href="/" class="logo fl"><img src="images/logo.png" alt="logo"></a>
            {% include 'news/logined.html'%}
        </div>
    </div>
    
    <div class="conter_con">
        <input type="hidden" id='news_id'value="{{news.id}}">
        <div class="detail_con fl">
            <h3>{{news.name}}</h3>
            <div class="detail_about clearfix">
                <span class="time_souce fl">{{news.publish_time}} 来源: {{news.author.nick_name}}</span>
                <span class="comment fr">{{news.comment_count}}</span>
            </div>

            <p class="summary">
                摘要：{{news.abstract}}
            </p>

            <h4>{{news.name}}</h4>

            {{news.msg| safe }}
            
        {%if collect ==1 %}
        <a href="javascript:;" id ='collection2' class="collection block-center" style="display: block">收藏</a>
        <a href="javascript:;" id ='collection1' class="collection block-center login_btn" style="display: none">收藏</a>
        <a href="javascript:;" class="collected block-center" style="display: none"><span class="out">已收藏</span><span class="over">取消收藏</span></a>
        {%elif collect==3%}
        <a href="javascript:;" id ='collection2' class="collection block-center" style="display: none">收藏</a>
        <a href="javascript:;" id ='collection1' class="collection block-center login_btn" style="display: block">收藏</a>
        <a href="javascript:;" class="collected block-center" style="display: none"><span class="out">已收藏</span><span class="over">取消收藏</span></a>
        {%else%}
        <a href="javascript:;" id ='collection2' class="collection block-center" style="display: none">收藏</a>
        <a href="javascript:;" id ='collection1' class="collection block-center login_btn" style="display: none">收藏</a>
        <a href="javascript:;" class="collected block-center" style="display: block"><span class="out">已收藏</span><span class="over">取消收藏</span></a>
        {%endif%}
        {%if logined=='false'%}
        <div class="comment_form_logout" style="display: block">
            登录发表你的评论
        </div>
        <form action="" class="comment_form" method="POST" style="display: none">
                <div class="person_pic"> 
                    <img src="{{avatar_get}}" alt="用户图标">
                </div>
                <textarea placeholder="请发表您的评论" class="comment_input" name='comment'></textarea>
                <input type="submit" name="" value="评 论" class="comment_sub">
            </form>
        {%else%}
        <div class="comment_form_logout" style="display: none">
                登录发表你的评论
            </div>
            <input type="hidden" id ='csrf_token'name='csrf_token' value="{{ csrf_token() }}">
        <form action="" class="comment_form" id = 'comment_form'method="POST" style="display: block">
            <div class="person_pic"> 
                <img src="{{avatar_get}}" alt="用户图标">
            </div>
            <textarea placeholder="请发表您的评论" class="comment_input" id ='comment_input' name='comment'></textarea>
            <input type="submit" name="" value="评 论" class="comment_sub">
        </form>
        {%endif%}

        <div class="comment_count">
            <span id='comment_count'>{{news.comment_count}}</span>条评论
        </div>
        
        <div class="comment_list_con">
            <div v-for='comment1 in comments'>
            <div  class="comment_list">
                <div class="person_pic fl">
                    <img :src="comment1.avartar" alt="用户图标">
                </div>    
                <div class="user_name fl">[[comment1.nick_name]]</div>
                <div class="comment_text fl">
                    [[comment1.msg]]
                </div>
                <div v-for='comment2 in comment1.comment_list'>
                <div class="reply_text_con fl">
                    <div class="user_name2">[[comment2.author]]</div>
                    <div class="reply_text">
                            [[comment2.msg]]
                    </div>
                </div>
            </div>
                <div class="comment_time fl">[[comment1.publish_time]]</div>
                <a href="javascript:;" :comment='comment1.id'v-if='comment1.liked == 1'class="has_comment_up fr">[[comment1.like_count]]</a>
                <a href="javascript:;" :comment='comment1.id'v-else class="comment_up fr">[[comment1.like_count]]</a>
                <a href="javascript:;" class="comment_reply fr">回复</a>
                <form class = "reply_form fl">
                    <textarea  class="reply_input"></textarea>
                    <input type="button" name="" value="回复" :comment='comment1.id' class="reply_sub fr">
                    <input type="reset" name="" value="取消"  :comment='comment1.id' class="reply_cancel fr">
                </form>            
            </div>
            </div>
        </div>
            
            
        </div>
        <div class="rank_con fr">
            <div class="author_card" author='{{news.author.id}}'>
                <a href="other?id={{news.author.id}}" class="author_pic">
                    <img src="{{news.author.avatar_get}}" alt="author_pic">
                </a>
                <a href="other?id={{news.author.id}}" class="author_name">{{news.author.nick_name}}</a>
                <div class="author_resume">{{news.author.signature}}</div>
                <div class="writings"><span>总篇数</span><b>{{news.author.publish_news_count}}</b></div>
                <div class="follows"><span>粉丝</span><b>{{news.author.fans_count}}</b></div>
                {%if follow ==1 %}
                <a href="javascript:;" class="focus fr" style="display: none">关注</a>
                <a href="javascript:;" class="focused fr" style="display: block"><span class="out">已关注</span><span class="over">取消关注</span></a>
                {%elif follow==2%}
                <a href="javascript:;" class="focus fr" style="display: block">关注</a>
                <a href="javascript:;" class="focused fr" style="display: none"><span class="out">已关注</span><span class="over">取消关注</span></a>
                {%endif%}
            </div>            
            {%include 'news/hot_news.html'%}
        </div>
    </div>
    <div class="footer">        
        <div class="footer_links">
            <a href="">关于我们</a>
            <span>|</span>
            <a href="">联系我们</a>
            <span>|</span>
            <a href="">招聘人才</a>
            <span>|</span>
            <a href="">友情链接</a>
        </div>
        <p class="copyright">
            CopyRight © 2018 新经资讯信息技术有限公司 All Rights Reserved<br />
电话：010-****888    京ICP备*******8号
        </p>
    </div>
    {% include 'news/login.html'%}
</body>
</html>